#!/usr/bin/make -f

include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/cmake.mk

DEB_CMAKE_EXTRA_FLAGS = \
	-DCMAKE_BUILD_TYPE="Release" \
	-DCMAKE_C_COMPILER="/usr/bin/gcc" \
	-DISIS_DEBUG_LOG:BOOL=OFF \
	-DQT_QMAKE_EXECUTABLE=/usr/bin/qmake-qt4 \
	-Dvast_PLUGIN_TIMEPLOTTER:BOOL=ON \
	-Dvast_PLUGIN_ORIENTATIONCORRECTION:BOOL=ON \
	-Dvast_PLUGIN_MASKEDIT:BOOL=ON \
	-Dvast_PLUGIN_CORRELATIONPLOTTER:BOOL=ON \
	-Dvast_PLUGIN_HISTOGRAM:BOOL=ON \
	-DVAST_OPENMP:BOOL=ON


# get number of parallel builds from the default environment
# variable DEB_BUILD_OPTIONS. The expected value is 'parrallel=#'.
ifneq (,$(filter parallel=%,$(DEB_BUILD_OPTIONS)))
	NUMJOBS = $(patsubst parallel=%,%,$(filter parallel=%,$(DEB_BUILD_OPTIONS)))
    MAKEFLAGS += -j$(NUMJOBS)
endif
